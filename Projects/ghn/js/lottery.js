function lottery_tip(t){$(".ch-tip-box").show().html('<div class="ch-tip"></div>'),$(".ch-tip").html(t),setTimeout(function(){$(".ch-tip").addClass("ch-tip-show")},10),setTimeout(function(){$(".ch-tip").removeClass("ch-tip-show")},1500),setTimeout(function(){$(".ch-tip-box").hide()},1800)}var defaults={selector:"#lottery",width:3,height:3,initSpeed:300,speed:0,upStep:50,upMax:100,downStep:30,downMax:500,waiting:3e3,index:0,target:5,isRunning:!1,nolottery:!1};$(".overly").on("touchend",function(){closeModal()});var lottery={lottery:function(t){this.options=$.extend(!0,defaults,t),this.options.speed=this.options.initSpeed,this.container=$(this.options.selector),this._setup()},_setup:function(){for(var t=0;t<this.options.width;++t)this.container.find(".ch-lottery-group:first").find(".ch-lottery-turn:eq("+t+")").attr("ch-lottery-turn-index",t);for(var o=lottery._count()-this.options.height+1,i=0,n=this.options.width+this.options.height-2;o>=n;--o,++i)this.container.find(".ch-lottery-group:last").find(".ch-lottery-turn:eq("+i+")").attr("ch-lottery-turn-index",o);for(var e=1,s=this.options.height-2;e<=s;++e)this.container.find(".ch-lottery-group").eq(e).find(".ch-lottery-turn:first").attr("ch-lottery-turn-index",lottery._count()-e),this.container.find(".ch-lottery-group").eq(e).find(".ch-lottery-turn:last").attr("ch-lottery-turn-index",this.options.width+e-1);this._enable()},_enable:function(){this.container.find(".ch-lottery-start").removeClass("ch-lottery-end").bind("click",this.beforeRoll)},_disable:function(){this.container.find(".ch-lottery-start").addClass("ch-lottery-end").unbind("click",this.beforeRoll)},_up:function(){var t=this;t.options.speed<=t.options.upMax?t._constant():(t.options.speed-=t.options.upStep,t.upTimer=setTimeout(function(){t._up()},t.options.speed))},_constant:function(){var t=this;clearTimeout(t.upTimer),setTimeout(function(){t.beforeDown()},t.options.waiting)},beforeDown:function(){var t=this;t.aim(),t.options.beforeDown&&t.options.beforeDown.call(t),t.options.isRunning&&t._down()},_down:function(){var t=this;t.options.speed>t.options.downMax&&t.options.target==t._index()?t._stop():(t.options.speed+=t.options.downStep,t.downTimer=setTimeout(function(){t._down()},t.options.speed))},_stop:function(){var t=this,o=this.options.target;if(clearTimeout(t.downTimer),clearTimeout(t.rollerTimer),t.options.speed=t.options.initSpeed,t.options.isRunning=!1,t._enable(),t.options._stop)t.options._stop.call(this);else{var i=$('.ch-lottery-turn[ch-lottery-turn-index="'+o+'"]').find("p").text(),n=$('.ch-lottery-turn[ch-lottery-turn-index="'+o+'"]').find(".ch-img").html();lottery_modal(i,n,o)}},beforeRoll:function(){var t=lottery;t.options.beforeRoll&&t.options.beforeRoll.call(t),t.options.nolottery?t.container.find(".ch-lottery-turn").removeClass("ch-active"):(t._roll(),t._disable())},_roll:function(){var t=this;t.container.find('.ch-lottery-turn[ch-lottery-turn-index="'+t._index()+'"]').removeClass("ch-active"),++t.options.index,t.container.find('.ch-lottery-turn[ch-lottery-turn-index="'+t._index()+'"]').addClass("ch-active"),t.rollerTimer=setTimeout(function(){t._roll()},t.options.speed),t.options.isRunning||(t._up(),t.options.isRunning=!0)},_index:function(){return this.options.index%this._count()},_count:function(){return this.options.width*this.options.height-(this.options.width-2)*(this.options.height-2)},aim:function(){this.options.aim?this.options.aim.call(this):this.options.target=2}};